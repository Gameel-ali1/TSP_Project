<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Watch Route Animation</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/optimize_route.css' %}">
</head>
<body>
  <style>
    /* Make the view-graph page primarily the graph area */
    html,body { height:100%; margin:0; background:#000; }
    #viewGraph { position:fixed; top:0; left:0; right:0; bottom:0; width:100%; height:100%; }
    /* Controls overlay */
    .vg-controls { position:fixed; left:12px; bottom:12px; z-index:9999; display:flex; gap:8px; align-items:center; }
    .vg-controls .zoom-btn { padding:8px 12px; }
    .vg-topbar { position:fixed; left:12px; top:12px; color:#fff; z-index:9999; font-weight:600; }
  </style>

  {% if error %}
    <div class="error show" style="position:fixed;left:12px;top:12px;z-index:10000">{{ error }}</div>
  {% endif %}

  <div id="viewGraph"></div>

  <div class="vg-topbar">Watch Route Animation — playback will draw nodes one-by-one</div>

  <div class="vg-controls">
    <button id="playBtn" class="zoom-btn">Play ▶</button>
    <button id="pauseBtn" class="zoom-btn">Pause ⏸</button>
    <label style="color:#fff;font-weight:600;">Speed</label>
    <input id="speedRange" type="range" min="0.25" max="4" step="0.25" value="1">
    <button id="uniformLayoutBtn" class="zoom-btn" title="Arrange nodes with uniform link lengths">Uniform Links</button>
    <button id="closeBtn" class="zoom-btn" onclick="window.close()">Close</button>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // route data injected by server
    var ROUTE_DATA = {{ route_json|default:'null'|safe }};
  </script>
  <script src="{% static 'js/view_graph.js' %}"></script>
</body>
</html>